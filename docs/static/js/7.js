webpackJsonp([7],{Bk9r:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o("0xDb"),a=o("5reh"),i={name:"XgCreateNote",data:function(){return{loading:!1,form:{id:"",title:"",content:"",tag:"primary",finish:!1,collect:!1,create_at:"",update_at:""},rules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],content:[{required:!0,message:"请输入内容",trigger:"blur"}],tag:[{required:!0,message:"请选择标签类型",trigger:"change"}]}}},beforeMount:function(){this.form.id=Object(r.d)()},computed:{tagMap:function(){return this.$store.state.tagMap}},watch:{loading:function(t){t?this.$indicator.open({spinnerType:"fading-circle"}):this.$indicator.close()}},methods:{resetForm:function(){this.$refs.noteForm.resetFields(),this.form.finish=!1,this.form.collect=!1,this.form.tag="primary"},submitForm:function(){var t=this;this.loading=!0,this.$refs.noteForm.validate(function(e){if(!e)return t.loading=!1,t.$toast({message:"信息不完整"}),!1;t.form.create_at=new Date,t.form.update_at=new Date,t.$store.dispatch(a.b,t.form).then(function(){t.$messagebox.alert("新建成功").then(function(e){t.$router.push("/note/"+t.form.id)})}).catch(function(){t.$toast({message:"新建失败，请重试"})}).finally(function(){t.loading=!1,t.$indicator.close()})})}}},n={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"xg-form"},[o("el-form",{ref:"noteForm",attrs:{rules:t.rules,model:t.form,"label-width":"60px"}},[o("el-form-item",{attrs:{label:"标题",prop:"title"}},[o("el-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"内容",prop:"content"}},[o("el-input",{attrs:{type:"textarea"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"标签",prop:"tag"}},[o("el-select",{attrs:{placeholder:"请选择标签类型"},model:{value:t.form.tag,callback:function(e){t.$set(t.form,"tag",e)},expression:"form.tag"}},t._l(t.tagMap,function(e,r){return o("el-option",{key:r,attrs:{label:e,value:r}},[o("span",{staticStyle:{float:"left"}},[t._v(t._s(e))]),t._v(" "),o("span",{staticStyle:{float:"right"}},[o("i",{staticClass:"icon icon-tag",class:r})])])}))],1),t._v(" "),o("el-form-item",{attrs:{label:"是否收藏","label-width":"80px"}},[o("el-switch",{model:{value:t.form.collect,callback:function(e){t.$set(t.form,"collect",e)},expression:"form.collect"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"是否完成","label-width":"80px"}},[o("el-switch",{model:{value:t.form.finish,callback:function(e){t.$set(t.form,"finish",e)},expression:"form.finish"}})],1),t._v(" "),o("el-form-item",{staticClass:"form-btn-group",attrs:{"label-width":"0"}},[o("mt-button",{attrs:{size:"large",disabled:t.loading,type:"primary"},on:{click:function(e){t.submitForm()}}},[t._v("提交")]),t._v(" "),o("mt-button",{attrs:{size:"large"},on:{click:function(e){t.resetForm()}}},[t._v("重置")])],1)],1)],1)},staticRenderFns:[]};var l=o("VU/8")(i,n,!1,function(t){o("oG5L")},"data-v-27f04e65",null);e.default=l.exports},oG5L:function(t,e){}});