webpackJsonp([4],{AJqI:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("Dd8w"),i=n.n(a),o=n("5reh"),r=n("E2Ws"),s=n("lkey"),l={name:"XgEditeNote",data:function(){return{loading:"",note:"",form:{id:"",title:"",content:"",tag:"primary",finish:!1,collect:!1,create_at:"",update_at:""},rules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],content:[{required:!0,message:"请输入内容",trigger:"blur"}],tag:[{required:!0,message:"请选择标签类型",trigger:"change"}]}}},beforeMount:function(){this.getNote()},computed:{tagMap:function(){return this.$store.state.tagMap}},watch:{loading:function(t){t?this.$indicator.open({spinnerType:"fading-circle"}):this.$indicator.close()}},methods:{getNote:function(){var t=this;this.loading=!0,this.$store.dispatch(o.e,this.$route.params.id).then(function(e){t.note=e,t.form=i()({},e)}).catch(function(){t.$toast({message:"获取数据失败"})}).finally(function(){t.loading=!1,t.$indicator.close()})},restoreForm:function(){this.form=i()({},this.note)},submitForm:function(){var t=this;this.loading=!0,this.$refs.noteForm.validate(function(e){if(!e)return t.loading=!1,t.$toast({message:"信息不完整"}),!1;t.form.update_at=new Date,t.$store.dispatch(o.c,t.form).then(function(){t.$messagebox.alert("编辑成功").then(function(e){t.$router.push("/note/"+t.form.id)})}).catch(function(){t.$toast({message:"编辑失败，请重试"})}).finally(function(){t.loading=!1,t.$indicator.close()})})}},components:{XgSelectTag:r.a,XgButton:s.a}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"xg-form"},[n("el-form",{ref:"noteForm",attrs:{rules:t.rules,model:t.form,"label-width":"60px"}},[n("el-form-item",{attrs:{label:"标题",prop:"title"}},[n("el-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"内容",prop:"content"}},[n("el-input",{attrs:{type:"textarea"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"标签",prop:"tag"}},[n("xg-select-tag",{attrs:{tagMap:t.tagMap},model:{value:t.form.tag,callback:function(e){t.$set(t.form,"tag",e)},expression:"form.tag"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"是否收藏","label-width":"80px"}},[n("el-switch",{model:{value:t.form.collect,callback:function(e){t.$set(t.form,"collect",e)},expression:"form.collect"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"是否完成","label-width":"80px"}},[n("el-switch",{model:{value:t.form.finish,callback:function(e){t.$set(t.form,"finish",e)},expression:"form.finish"}})],1),t._v(" "),n("el-form-item",{staticClass:"form-btn-group",attrs:{"label-width":"0"}},[n("xg-button",{attrs:{size:"large",disabled:t.loading,type:"primary"},on:{click:function(e){t.submitForm()}}},[t._v("\n        提交\n      ")]),t._v(" "),n("xg-button",{attrs:{size:"large"},on:{click:function(e){t.restoreForm()}}},[t._v("\n        还原\n      ")])],1)],1)],1)},staticRenderFns:[]};var u=n("VU/8")(l,c,!1,function(t){n("g72D")},"data-v-629c340c",null);e.default=u.exports},E2Ws:function(t,e,n){"use strict";var a={name:"XgTag",props:{type:String,hit:Boolean}},i={render:function(){var t=this.$createElement;return(this._self._c||t)("span",{staticClass:"xg-tag",class:[this.type?"xg-tag-"+this.type:"",{"is-hit":this.hit}]},[this._t("default")],2)},staticRenderFns:[]};var o={name:"XgSelectTag",data:function(){return{currentVal:""}},props:["tagMap","value"],watch:{value:function(t){this.currentVal=t},currentVal:function(t){this.$emit("input",t)}},methods:{handleClick:function(t){this.currentVal=t}},components:{XgTag:n("VU/8")(a,i,!1,function(t){n("jilH")},"data-v-191d8ce4",null).exports}},r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"xg-select-tag"},t._l(t.tagMap,function(e,a){return n("xg-tag",{key:a,attrs:{type:a,hit:t.value!==a},nativeOn:{click:function(e){t.handleClick(a)}}},[n("i",{staticClass:"icon icon-tag"}),t._v(" "),n("span",[t._v(t._s(e))])])}))},staticRenderFns:[]};var s=n("VU/8")(o,r,!1,function(t){n("FolI")},"data-v-7c279700",null);e.a=s.exports},FolI:function(t,e){},g72D:function(t,e){},jilH:function(t,e){}});